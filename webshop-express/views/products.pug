extends layout

block content
  body#productsPageBackground(min-width:100%)
    .container        
      .row
        .col-12
          - let limitNumber = displaySize || 10
          form.form-inline.mt-3.mb-3(method="POST" action="/products")
            .form-group
              select.form-control(name="limit")
                - const viewArray = [10,15,20,25,50];
                each view in viewArray
                  if displaySize == view
                    option(value=`${view}` selected) #{view}
                  else 
                    option(value=`${view}`) #{view}              
              span.input-group-btn  
                button.btn.btn-light(type='submit') View 
      .row                 
        each product , index in products
          if index < limitNumber
            .col.col-xs-12.col-md-6.col-lg-4
              .card
                .card-header
                  a.btn.btn-sm.btn-primary#addToBasketBtn Add to basket
                  img.card-img-top(src='/images/food1.jpg')
                .card-body.text-center
                  h5 #{product.productName}
                  p #{product.type}
                  p #{product.price}
                  .div.text-center
                    a.btn.btn-warning#showProductDetailsBtn(href=`/products/${product.urlPostfix}`) Show me more
        .col-12                       
          if numberOfproducts > limitNumber
            nav(aria-label='Page navigation example')
              ul.pagination.justify-content-center
                - let x = 1;
                - let y = Math.round(numberOfproducts/limitNumber) 
                  li.page-item
                    a.page-link(href=`/products?page=${prevPage || 1 }&limit=${limitNumber}` aria-label='Previous')
                      span(aria-hidden='true') &laquo;
                      span.sr-only Previous
                  while x <= y
                      li.page-item
                        a.page-link(href=`/products?page=${x}&limit=${limitNumber}`) #{x++}    
                  li.page-item
                    a.page-link(href=`/products?page=${nextPage || 1 }&limit=${limitNumber}` aria-label='Next')
                      span(aria-hidden='true') &raquo;
                      span.sr-only Next    
        //- script.
        //-     const optionNode = document.querySelectorAll('option');
        //-     optionNode.forEach(x => {
        //-       if (x.value == limitNumber){
        //-         console.log(x)
        //-         return x.setAttribute('selected','selected')
        //-       }
        //-     })
        //-    // optionNode.setAttribute('selected','selected')                  





